/*!
 * Chico UI 0.7.4-1 MIT Licence
 * @autor <chico@mercadolibre.com>
 * @link http://www.chico-ui.com.ar
 * @team Natan Santolo, Hernan Mammana, Leandro Linares, Guillermo Paz, Natalia Devalle
 */
;(function($){undefined;var ch=window.ch={version:"0.7.4",instances:{},features:{},init:function(){$("html").removeClass("no-js"),ch.features=ch.support(),ch.utils.document.bind("keydown",function(a){ch.keyboard(a)})},utils:{body:$("body"),html:$("html"),window:$(window),document:$(document),zIndex:1e3,index:0,isTag:function(a){return/<([\w:]+)/.test(a)},isSelector:function(a){if(typeof a!="string")return!1;for(var b in $.expr.match)if($.expr.match[b].test(a)&&!ch.utils.isTag(a))return!0;return!1},inDom:function(a,b){if(typeof a!="string")return!1;var a=a.replace(/(\!|\"|\$|\%|\&|\'|\(|\)|\*|\+|\,|\/|\;|\<|\=|\>|\?|\@|\[|\\|\]|\^|\`|\{|\||\}|\~)/gi,function(a,b){return"\\\\"+b});return $(a,b).length>0},isArray:function(a){return Object.prototype.toString.apply(a)==="[object Array]"},isUrl:function(a){return/^((http(s)?|ftp|file):\/{2}(www)?|www.|((\/|\.{1,2})([\w]|\.{1,2})*\/)+|(\.\/|\/|\:\d))([\w\-]*)?(((\.|\/)[\w\-]+)+)?([\/?]\S*)?/.test(a)},avoidTextSelection:function(){$.each(arguments,function(a,b){$.browser.msie?$(b).attr("unselectable","on"):$.browser.opera?$(b).bind("mousedown",function(){return!1}):$(b).addClass("ch-user-no-select")});return},hasOwn:function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},getStyles:function(a,b){if(window.getComputedStyle)return getComputedStyle(a,"").getPropertyValue(b);b=b.replace(/\-(\w)/g,function(a,b){return b.toUpperCase()});return a.currentStyle[b]}},events:{LAYOUT:{CHANGE:"change"},VIEWPORT:{SCROLL:"ch-scroll",RESIZE:"ch-resize"},KEY:{ENTER:"enter",ESC:"esc",LEFT_ARROW:"left_arrow",UP_ARROW:"up_arrow",RIGHT_ARROW:"right_arrow",DOWN_ARROW:"down_arrow"}}};ch.clon=function(a){obj={};for(x in a)obj[x]=a[x];return obj},ch.factory=function(a){var b=a.component||a,c=function(b){$.fn[b]=function(a){var c=[],d=this,e=arguments;d.each(function(d,f){var g=a||{},h={};h.type=b,h.element=f,h.$element=$(f),h.uid=ch.utils.index+=1;switch(typeof g){case"number":var i=g;g={},g.value=i,e[1]&&(g.msg=e[1]);break;case"string":var j=g;g={},g.msg=j;break;case"function":var k=g;g={},g.lambda=k,e[1]&&(g.msg=e[1])}var l=ch[b].call(h,g);l=ch.utils.hasOwn(l,"public")?l["public"]:l;if(l.type){var m=l.type;ch.instances[m]||(ch.instances[m]=[]),ch.instances[m].push(l)}l.exists&&(l=l.object),c.push(l)});return c.length>1?c:c[0]},a.callback&&a.callback()};ch[b]?c(b):ch.get({method:"component",component:b,script:a.script?a.script:"src/js/"+b+".js",styles:a.style?a.style:"src/css/"+b+".css",callback:c})},ch.get=function(a){if(a.style){var b=document.createElement("link");b.href=a.style,b.rel="stylesheet",b.type="text/css"}if(a.script){var c=document.createElement("script");c.src=a.script}var d=document.getElementsByTagName("head")[0]||document.documentElement,e=!1;c.onload=c.onreadystatechange=function(){!e&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")&&(e=!0,a.callback&&a.callback(a.component),c.onload=c.onreadystatechange=null,d&&c.parentNode&&d.removeChild(c))},a.script&&d.insertBefore(c,d.firstChild),a.style&&d.appendChild(b)},ch.support=function(){var a=document.body||document.documentElement,b=function(){var b=a.style;return b.WebkitTransition!==undefined||b.MozTransition!==undefined||b.OTransition!==undefined||b.transition!==undefined}(),c=function(){var b=!1,c=document.createElement("div");c.style.position="fixed",c.style.top="10px",a.appendChild(c),c.offsetTop===10&&(b=!0),a.removeChild(c);return b}();return{transition:b,fixed:c}},ch.extend=function(a){"use strict";return{as:function(b,c){ch[b]=function(d){d[b]=d.value||!0,d=c?c(d):d||{},d.messages=d.messages||{},ch.utils.hasOwn(d,"msg")&&(d.messages[b]=d.msg,d.msg=null,delete d.msg);return ch[a].call(this,d)},ch.factory(b)}}},ch.controllers=function(){var a=this;a=ch.object.call(a),a.parent=ch.clon(a),a.children=[];return a},ch.floats=function(){var a=this,b=a.conf;a=ch.object.call(a),a.parent=ch.clon(a);var c=function(){$('<div class="ch-cone">').prependTo(a.$container)},d=function(){$('<div class="btn close" style="z-index:'+(ch.utils.zIndex+=1)+'">').bind("click",function(b){a.innerHide(b)}).prependTo(a.$container),ch.utils.document.bind(ch.events.KEY.ESC,function(b){a.innerHide(b)})};a.active=!1,a.source=b.content||b.msg||b.ajax||a.$element.attr("href")||a.$element.parents("form").attr("action"),a.$container=function(){a.$container=$('<div class="ch-'+a.type+'" style="z-index:'+(ch.utils.zIndex+=1)+'">'),ch.utils.hasOwn(b,"classes")&&a.$container.addClass(b.classes),ch.utils.hasOwn(b,"width")&&a.$container.css("width",b.width),ch.utils.hasOwn(b,"height")&&a.$container.css("height",b.height),ch.utils.hasOwn(b,"closeButton")&&b.closeButton&&d(),ch.utils.hasOwn(b,"cone")&&c(),ch.utils.hasOwn(b,"fx")?b.fx=b.fx:b.fx=!0,b.position=b.position||{},b.position.hold=b.hold||!1;return a.$container}(),a.$content=$('<div class="ch-'+a.type+'-content">').appendTo(a.$container),a["public"].on("contentLoad",function(c,d){a.$content.html(a.staticContent),ch.utils.hasOwn(b,"onContentLoad")&&b.onContentLoad.call(d,a.staticContent),ch.utils.hasOwn(b,"position")&&ch.positioner(b.position)}),a["public"].on("contentError",function(c,d){a.$content.html(a.staticContent);var e=a.source;ch.utils.hasOwn(b,"onContentError")&&b.onContentError.call(d.context,d.jqXHR,d.textStatus,d.errorThrown),a.source=e,a.staticContent=undefined,ch.utils.hasOwn(b,"position")&&ch.positioner(b.position)}),a.innerShow=function(c){c&&a.prevent(c);if(!a.active){a.$container.appendTo("body").css("z-index",ch.utils.zIndex++),a.content(),b.fx?a.$container.fadeIn("fast",function(){a.trigger("show"),a.callbacks("onShow")}):(a.$container.removeClass("ch-hide"),a.trigger("show"),a.callbacks("onShow")),b.position.element=a.$container,a.position("refresh"),a.active=!0;return a}},a.innerHide=function(c){c&&a.prevent(c);if(!!a.active){var d=function(){a.active=!1,a.trigger("hide"),a.callbacks("onHide"),a.$container.detach()};b.fx?a.$container.fadeOut("fast",d):(a.$container.addClass("ch-hide"),d());return a}},a.size=function(b,c){if(!c)return a.conf[b];a.conf[b]=c,a.$container[b](c),a.position("refresh");return a["public"]},a["public"].show=function(b){b!==undefined&&a["public"].content(b),a.innerShow();return a["public"]},a["public"].hide=function(){a.innerHide();return a["public"]},a["public"].width=function(b){return a.size("width",b)||a["public"]},a["public"].height=function(b){return a.size("height",b)||a["public"]},a["public"].isActive=function(){return a.active};return a},ch.navs=function(){var a=this,b=a.conf;b.icon=ch.utils.hasOwn(b,"icon")?b.icon:!0,b.open=b.open||!1,b.fx=b.fx||!1,a=ch.object.call(a),a.parent=ch.clon(a);var c=function(){$("<span>").addClass("ico").html("drop").appendTo(a.$trigger);return};a.active=!1,a.show=function(c){a.prevent(c);if(a.active)return a.hide(c);a.active=!0,a.$trigger.addClass("ch-"+a.type+"-trigger-on"),b.fx?a.$content.slideDown("fast",function(){a.trigger("show"),a.callbacks("onShow")}):(a.$content.removeClass("ch-hide"),a.trigger("show"),a.callbacks("onShow"));return a},a.hide=function(c){a.prevent(c);if(!!a.active){a.active=!1,a.$trigger.removeClass("ch-"+a.type+"-trigger-on"),b.fx?a.$content.slideUp("fast",function(){a.callbacks("onHide")}):(a.$content.addClass("ch-hide"),a.trigger("hide"),a.callbacks("onHide"));return a}},a.configBehavior=function(){a.$trigger.addClass("ch-"+a.type+"-trigger").bind("click",function(b){a.show(b)}),a.$content.addClass("ch-"+a.type+"-content ch-hide"),b.icon&&c(),b.open&&a.show()},a.$element.addClass("ch-"+a.type);return a},ch.object=function(){var a=this,b=a.conf;a.staticContent,a.DOMParent,a.originalContent,a.prevent=function(b){b&&typeof b=="object"&&(b.preventDefault(),b.stopPropagation());return a},a.content=function(c){var d=c?!1:!0,c=c,e=ch.utils.isUrl(a.source),f=ch.utils.isSelector(a.source),g=e?!1:ch.utils.inDom(a.source),h=ch.utils.hasOwn(a,"controller")?a.controller:a["public"],i,j=ch.utils.hasOwn(b,"cache")?b.cache:!0;if(d){if(a.source===i){a.staticContent="<p>No content defined for this component</p>",a.trigger("contentLoad");return}if(!j||a.staticContent===i){a.content(a.source);return}if(j&&a.staticContent){var k=ch.cache.get(a.source);if(k&&a.staticContent!=k){a.staticContent=k,a.trigger("contentLoad");return}return}}b.cache=!1;var l=ch.utils.isUrl(c),m=ch.utils.isSelector(c),n=l?!1:ch.utils.inDom(c);a.staticContent=a.source=c;if(l){if(j){var k=ch.cache.get(a.source);if(k){b.cache=j,a.staticContent=k,a.trigger("contentLoad",h);return}}var o,p,q="x=x";a.$element.attr("type")=="submit"&&(o=a.$element.parents("form").attr("method")||"GET",p=a.$element.parents("form").serialize(),q=q+(p!=""?"&"+p:"")),setTimeout(function(){$.ajax({url:a.source,type:o||"GET",data:q,cache:j,async:!0,beforeSend:function(a){a.setRequestHeader("X-Requested-With","XMLHttpRequest")},success:function(b,c,d){a.staticContent=b,a.trigger("contentLoad",h),j&&ch.cache.set(a.source,a.staticContent)},error:function(b,c,d){a.staticContent="<p>Error on ajax call.</p>";var e={context:h,jqXHR:b,textStatus:c,errorThrown:d};a.trigger("contentError",e)}})},0),a.$content.html('<div class="loading"></div>'),a.staticContent=i}else m&&n&&(a.originalContent=$(c),a.DOMParent=a.originalContent.parent(),a.staticContent=a.originalContent.clone().removeClass("ch-hide")),j&&ch.cache.set(a.source,a.staticContent),a.originalContent&&a.originalContent.selector==a.source&&(a["public"].on("show",function(){a.originalContent.detach()}),a["public"].on("hide",function(){a.originalContent.appendTo(a.DOMParent||"body")}));b.cache=j,a.staticContent!==i&&a.trigger("contentLoad",h)},a.callbacks=function(c){if(ch.utils.hasOwn(b,c)){var d=a.controller?a.controller["public"]:a["public"];return b[c].call(d)}},a.position=function(c){switch(typeof c){case"object":b.position.context=c.context||b.position.context,b.position.points=c.points||b.position.points,b.position.offset=c.offset||b.position.offset,b.position.fixed=c.fixed||b.position.fixed,ch.positioner(b.position);return a["public"];case"string":c!="refresh"&&alert('Chico UI error: position() expected to find "refresh" parameter.'),ch.positioner(b.position);return a["public"];case"undefined":return b.position}},a.trigger=function(b,c){$(a["public"]).trigger("ch-"+b,c)},a["public"]={},a["public"].uid=a.uid,a["public"].element=a.element,a["public"].type=a.type,a["public"].position=a.position,a["public"].content=function(b){if(b){a.source=b,a.staticContent=undefined,a.active&&a.content(b);return a["public"]}return a.staticContent},a["public"].on=function(b,c){b&&c&&$(a["public"]).bind("ch-"+b,c);return a["public"]},a["public"].off=function(b,c){b&&c&&$(a["public"]).unbind("ch-"+b,c);return a["public"]};return a},ch.watcher=function(a){var b=this;a=ch.clon(a),b.conf=a,b=ch.object.call(b),b.parent=ch.clon(b);var c=function(){if(!(ch.utils.hasOwn(ch.instances,"form")&&ch.instances.form.length>0)){b.$element.parents("form").form();var d=ch.instances.form.length-1;return ch.instances.form[d]}var a=0,c=ch.instances.form.length;for(a;a<c;a+=1)if(ch.instances.form[a].element===b.$element.parents("form")[0])return ch.instances.form[a]}(),d=function(){var a=ch.instances.watcher;if(a&&a.length>0)for(var c=0,d=a.length;c<d;c+=1){if(a[c].element!==b.element)continue;$.merge(a[c].conditions,b.conditions);return{exists:!0,object:a[c]}}},e=function(){b.validate(),c.checkStatus()};b.active=!1,b.enabled=!0,b.reference=function(){var a;if(b.$element.hasClass("options"))if(b.$element.find("h4").length>0){var c=b.$element.find("h4");c.wrapInner("<span>"),a=c.children()}else b.$element.prev().prop("tagName")=="LEGEND"&&(a=b.$element.prev());else a=b.$element;return a}(),b.conditions=function(){var b=[],c=0,d=a.conditions.length;for(c;c<d;c+=1){var e=a.conditions[c];a[e.name]&&(e.value=a[e.name],a.messages[e.name]&&(e.message=a.messages[e.name]),b.push(e))}return b}(),b.isRequired=function(){var a=b.conditions.length;while(a--){var c=b.conditions[a];if(c.name==="required"&&c.value)return!0}return!1};var f={};f.uid=b.uid+"#0",f.type="helper",f.element=b.element,f.$element=b.$element,b.helper=ch.helper.call(f,b),b.validate=function(a){if(!b.$element.attr("disabled")){var d=b.isRequired();if(!d&&b.isEmpty()&&b.active===!1)return;if(b.enabled&&(b.active===!1||!b.isEmpty()||d)){b.callbacks("beforeValidate"),b.trigger("beforeValidate");var e=0,f=b.conditions.length,g=b.$element.val(),h=!1;for(e;e<f;e+=1){var i=b.conditions[e];b.isRequired()&&(h=b.isEmpty()),i.patt&&(h=!i.patt.test(g)),i.expr&&(h=!i.expr(g,i.value)),i.func&&(h=!i.func.call(b["public"],g));if(h){b.callbacks("error"),b.trigger("error"),b.$element.addClass("error");var j=i.message?i.message:ch.utils.hasOwn(c,"messages")?c.messages[i.name]:undefined;b.helper["public"].show('<span class="ico error">Error: </span><p>'+j+"</p>"),b.active=!0;var k=b.tag=="OPTIONS"||b.tag=="SELECT"?"change":"blur";b.$element.one(k,function(a){b.validate(a)});return}}}if(b.active||!b.enabled){b.$element.removeClass("error"),b.helper["public"].hide(),b.active=!1;if(a){var l=a.originalEvent.explicitOriginalTarget||document.activeElement;l.type=="submit"&&c.submit(a)}}b.callbacks("afterValidate"),b.trigger("afterValidate");return b}},b.reset=function(){b.active=!1,b.$element.removeClass("error"),b.helper["public"].hide(),b.$element.unbind("blur change",b.validate),b.callbacks("onReset"),b.trigger("reset");return b},b.isEmpty=function(){b.tag=b.$element.hasClass("options")?"OPTIONS":b.element.tagName;switch(b.tag){case"OPTIONS":return b.$element.find("input:checked").length===0;case"SELECT":var a=b.$element.val();return parseInt(a)===-1||a===null;case"INPUT":case"TEXTAREA":return $.trim(b.$element.val()).length===0}},b["public"].type="watcher",b["public"].reference=b.reference,b["public"].conditions=b.conditions,b["public"].helper=b.helper["public"],b["public"].active=function(){return b.active},b["public"].and=function(){return b.$element},b["public"].reset=function(){b.reset();return b["public"]},b["public"].validate=function(){b.validate();return b["public"]},b["public"].enable=function(){b.enabled=!0;return b["public"]},b["public"].disable=function(){b.enabled=!1,b.reset();return b["public"]},b["public"].refresh=function(){b.helper.position("refresh");return b["public"]},b.trigger("ready");var g=d();if(g){var b={};b["public"]=g}else c.children.push(b["public"]);return b},ch.cache={map:{},set:function(a,b){ch.cache.map[a]=b},get:function(a){return ch.cache.map[a]},rem:function(a){ch.cache.map[a]=null,delete ch.cache.map[a]},flush:function(){delete ch.cache.map,ch.cache.map={}}},ch.eraser=function(a){if(typeof a=="number")for(var b in ch.instances){var c=ch.instances[b];for(var d=0,e=c.length;d<e;d+=1)if(c[d].uid==a){delete c[d],c.splice(d,1);return}}else if(a==="meltdown")delete ch.instances,ch.instances={};else for(var b in ch.instances)if(b==a){var c=ch.instances[b];delete ch.instances[b]}},ch.keyboard=function(a){var b={13:"ENTER",27:"ESC",37:"LEFT_ARROW",38:"UP_ARROW",39:"RIGHT_ARROW",40:"DOWN_ARROW"};!ch.utils.hasOwn(b,a.keyCode)||ch.utils.document.trigger(ch.events.KEY[b[a.keyCode]],a)},ch.list=function(a){var b=this,c=a&&ch.utils.isArray(a)?a:[],d=function(a,d){if(!a)return c;var e=typeof a;if(e==="number"){a--;return d?d.call(b,a):c[a]}var f=h(),g,i;if(e==="string"||e==="object")while(f--){i=c[f];if(i===a)return d?d.call(b,f):i;for(g in i)if(g===a||i[g]===a)return d?d.call(b,f):i}},e=function(a){if(ch.utils.isArray(a)){var b=0,d=a.length;for(b;b<d;b++)c.push(a[b]);return c}return c.push(a)},f=function(a){if(!a)return b;var e=function(a){return c.splice(a,1)[0]};return d(a,e)},g=function(a){return d(a)},h=function(){return c.length},b={children:c,add:e,rem:f,get:g,size:h};return b},ch.onImagesLoads=function(a){var b=this;a=ch.clon(a),b.conf=a,b.$element.bind("load",function(){setTimeout(function(){--b.$element.length<=0&&b.conf.lambda.call(b.$element,this)},200)}).each(function(){if(this.complete||this.complete===undefined){var a=this.src;this.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",this.src=a}});return b},ch.factory("onImagesLoads"),ch.positioner=function(a){var b=function(){e=k(),f=p(),d=o(),n()},a=a||this.conf.position;a.points=a.points||"cm cm",a.offset=a.offset||"0 0";var c=$(a.element);c.css("position","absolute");var d,e,f,g={"lt lb":"ch-left ch-bottom","lb lt":"ch-left ch-top","rt rb":"ch-right ch-bottom","rb rt":"ch-right ch-top","lt rt":"ch-right","cm cm":"ch-center"},h=a.offset.split(" "),i=parseInt(h[0]),j=parseInt(h[1]),k=function(){var a,b,c,d,e,f,g,h=0;if(typeof window.innerWidth!="undefined"){a=window,b=a.innerWidth-h,c=a.innerHeight,f=a.pageXOffset,g=a.pageYOffset;return{element:a,left:0+i+f-h,top:0+j+g,bottom:c+g,right:b+f,width:b,height:c}}a=document.documentElement,b=a.clientWidth-h,c=a.clientHeight,f=a.scrollLeft,g=a.scrollTop;return{element:a,left:0+i+f,top:0+j+g,bottom:c+g,right:b+f,width:b,height:c}},l=function(a){var b=d.left,e=d.top,f=d.width,g=d.height,h=c.outerWidth(),i=c.outerHeight(),j={ll:b,lr:b+f,rr:b+f-h,cc:b+f/2-h/2},k={tt:e,tb:e+g,bt:e-i,mm:e+g/2-i/2},l={left:j[a.my_x+a.at_x],top:k[a.my_y+a.at_y]};return l},m=function(b,d){var h=l(d),k=g[b]||"";if(a.hold){h.classes=k;return h}var m;k=k.split(" "),(b==="lt lb"||b==="rt rb")&&h.top+f.top+c.outerHeight()>e.bottom&&(d.my_y="b",d.at_y="t",m=h,h=l(d),h.top+f.top<e.top?h=m:(h.top-=2*j,k[1]="ch-top")),h.left+f.left+c.outerWidth()>e.right&&(d.my_x=d.at_x="r",m=h,h=l(d),h.left<e.left?h=m:(h.left-=2*i,k[0]="ch-right",k[1]=="ch-top"&&(h.top-=2*j))),h.classes=k.join(" ");return h},n=function(){var b=a.points.split(" "),e={my_x:b[0].charAt(0),my_y:b[0].charAt(1),at_x:b[1].charAt(0),at_y:b[1].charAt(1)},f=m(a.points,e);c.css({left:f.left,top:f.top}).removeClass("ch-top ch-left ch-bottom ch-right").addClass(f.classes),ch.utils.hasOwn(d,"element")&&d.element!==ch.utils.window[0]&&$(d.element).removeClass("ch-top ch-left ch-bottom ch-right").addClass(f.classes)},o=function(){if(!a.context)return e;var b=a.context.offset();d={element:a.context,top:b.top+j-f.top,left:b.left+i-f.left,width:a.context.outerWidth(),height:a.context.outerHeight()};return d},p=function(){var a={};a.left=0,a.top=0;var b=c.offsetParent();if(b.css("position")==="relative"){var d=(b.outerWidth()-b.width()-parseInt(b.css("padding-left"))*2)/2;a=b.offset(),a.left-=i-d,a.top-=j}return{left:a.left,top:a.top}},q=!1;ch.utils.window.bind("resize scroll",function(){q=!0}),setInterval(function(){if(!!q){q=!1;if(c.css("display")==="none")return;b()}},350),b();return $(c)},ch.preload=function(a){typeof a=="string"&&(a=a.indexOf(",")>0?a.split(","):[a]);for(var b=0;b<a.length;b++){var c=document.createElement("object");c.data=a[b];var d=document.getElementsByTagName("head")[0];d.appendChild(c),d.removeChild(c)}},ch.calendar=function(a){var b=this;a=ch.clon(a),a.format=a.format||"DD/MM/YYYY",ch.utils.hasOwn(a,"msg")&&(a.msg=a.msg==="today"?new Date:new Date(a.msg)),ch.utils.hasOwn(a,"selected")&&(a.selected=a.selected==="today"?new Date:new Date(a.selected)),b.conf=a,b=ch.controllers.call(b),b.parent=ch.clon(b);var c=a.monthsNames||["Enero","Febero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],d=a.weekdays||["Dom","Lun","Mar","Mie","Jue","Vie","Sab"],e=new Date,f=a.selected||a.msg,g=function(){var a=["<thead>"];for(var b=0;b<7;b+=1)a.push("<th>"+d[b]+"</th>");a.push("</thead>");return a.join("")}(),h=$('<table class="ch-calendar-month datagrid">'+g+"</table>").bind("click",function(a){a=a||window.event;var c=a.target||a.srcElement;c.nodeName!=="TD"||c.className.indexOf("day")?b.prevent(a):o(b.currentDate.getFullYear()+"/"+(b.currentDate.getMonth()+1)+"/"+c.innerHTML)}),i=function(a){var a=new Date(a),b=h.clone(!0),d={};d.fullDate=new Date(a.getFullYear(),a.getMonth(),1),d.date=d.fullDate.getDate(),d.day=d.fullDate.getDay(),d.month=d.fullDate.getMonth(),d.year=d.fullDate.getFullYear();var g={};g.fullDate=new Date(a.getFullYear(),a.getMonth(),1),g.date=g.fullDate.getDate(),g.day=g.fullDate.getDay(),g.month=g.fullDate.getMonth(),g.year=g.fullDate.getFullYear();var i=d.day,j,k,l=["<tbody>"];do{l.push('<tr class="week">');for(var m=0;m<7;m+=1){if(g.date===1)for(var m=0;m<i;m+=1)l.push('<td class="disable"></td>');j=g.date===e.getDate()&&g.month===e.getMonth()&&g.year===e.getFullYear()?" today":"",k=f&&g.date===f.getDate()&&g.month===f.getMonth()&&g.year===f.getFullYear()?" selected":"",l.push('<td class="day'+j+k+'">'+g.date+"</td>"),g.fullDate.setDate(g.date+1),g.date=g.fullDate.getDate(),g.day=g.fullDate.getDay(),g.month=g.fullDate.getMonth(),g.year=g.fullDate.getFullYear();if(g.month!=d.month)break}l.push("</tr>")}while(g.month===d.month);l.push("</tbody>"),b.prepend("<caption>"+c[d.month]+" - "+d.year+"</caption>").append(l.join(""));return b},j={$prev:$('<p class="ch-calendar-prev">').bind("click",function(a){b.prevent(a),q()}),$next:$('<p class="ch-calendar-next">').bind("click",function(a){b.prevent(a),p()})},k=function(){b.$trigger.append("<strong>Calendar</strong>").append(b.$container),b.children[0]=b.$trigger.dropdown({onShow:function(){b.callbacks.call(b,"onShow"),b.trigger("show")},onHide:function(){b.callbacks.call(b,"onHide"),b.trigger("hide")}}),b.children[0].position({context:b.$element,points:"lt lb"})},l=function(){b.$trigger=$('<div class="secondary ch-calendar">'),b.$container=$('<div class="ch-calendar-container ch-hide">'),b.$content=$('<div class="ch-calendar-content">'),b.$element.after(b.$trigger),k()},m=function(b){var c=b.split("/");switch(a.format){case"DD/MM/YYYY":return c[2]+"/"+c[1]+"/"+c[0];case"MM/DD/YYYY":return c[2]+"/"+c[0]+"/"+c[1]}},n={"YYYY/MM/DD":function(a){return a.getFullYear()+"/"+(parseInt(a.getMonth(),10)+1<10?"0":"")+(parseInt(a.getMonth(),10)+1)+"/"+(parseInt(a.getDate(),10)<10?"0":"")+a.getDate()},"DD/MM/YYYY":function(a){return(parseInt(a.getDate(),10)<10?"0":"")+a.getDate()+"/"+(parseInt(a.getMonth(),10)+1<10?"0":"")+(parseInt(a.getMonth(),10)+1)+"/"+a.getFullYear()},"MM/DD/YYYY":function(a){return(parseInt(a.getMonth(),10)+1<10?"0":"")+"/"+(parseInt(a.getMonth(),10)+1)+"/"+a.getFullYear()}},o=function(c){f=new Date(c),b.currentDate=f,b.$content.html(i(f)),b.element.value=n[a.format](f),b.callbacks("onSelect"),b.trigger("select");return b},p=function(){b.currentDate=new Date(b.currentDate.getFullYear(),b.currentDate.getMonth()+1,1),b.$content.html(i(b.currentDate)),b.children[0].position("refresh"),b.callbacks("onNextMonth"),b.trigger("onNextMonth");return b},q=function(){b.currentDate=new Date(b.currentDate.getFullYear(),b.currentDate.getMonth()-1,1),b.$content.html(i(b.currentDate)),b.children[0].position("refresh"),b.callbacks("onPrevMonth"),b.trigger("onPrevMonth");return b},r=function(){b.currentDate=new Date(b.currentDate.getFullYear()+1,b.currentDate.getMonth(),1),b.$content.html(i(b.currentDate));return b},s=function(){b.currentDate=new Date(b.currentDate.getFullYear()-1,b.currentDate.getMonth(),1),b.$content.html(i(b.currentDate));return b},t=function(){f=a.selected,b.currentDate=f||e,b.element.value="",b.$content.html(i(b.currentDate)),b.callbacks("onReset"),b.trigger("onReset");return b};b.currentDate=f||e,b["public"].show=function(){b.children[0].show();return b["public"]},b["public"].hide=function(){b.children[0].hide();return b["public"]},b["public"].select=function(a){o(a==="today"?e:m(a));return b["public"]},b["public"].getSelected=function(){return n[a.format](f)},b["public"].getToday=function(){return n[a.format](e)},b["public"].next=function(a){switch(a){case"month":case undefined:p();break;case"year":r()}return b["public"]},b["public"].prev=function(a){switch(a){case"month":case undefined:q();break;case"year":s()}return b["public"]},b["public"].reset=function(){t();return b["public"]},b.element.type="text",b.element.value=f?n[a.format](f):"",l(),b.$content.html(i(b.currentDate)).appendTo(b.$container),b.$container.prepend(j.$prev).prepend(j.$next);return b},ch.factory("calendar"),ch.carousel=function(a){var b=this;a=ch.clon(a),a.pagination=(ch.utils.hasOwn(a,"asyncData")?!1:a.pagination)||!1,a.rolling=!1,a.arrows=ch.utils.hasOwn(a,"arrows")?a.arrows:!0,a.fx=ch.utils.hasOwn(a,"fx")?a.fx:!0,b.conf=a,b=ch.object.call(b),b.parent=ch.clon(b);var c=function(){b.$element.addClass("ch-carousel"),j=ch.utils.html.hasClass("ie6")?b.itemsWidth:0,ch.utils.hasOwn(a,"width")&&b.$element.css("width",a.width),ch.utils.hasOwn(a,"height")&&b.$element.css("height",a.height),!a.fx&&ch.features.transition&&b.$content.addClass("ch-carousel-nofx"),b.$mask.css("height",b.$items.outerHeight()),$.each(b.$items,function(a,c){var d=~~(a/b.itemsPerPage)+1;$(c).attr({"aria-hidden":d!==b.currentPage,"aria-setsize":b.itemsTotal,"aria-posinset":a+1,"aria-label":"page"+d})});var c=b.$items.length;ch.utils.hasOwn(a,"asyncData")&&c<b.itemsPerPage&&b.addItems(b.itemsPerPage-c)},d=function(){var c=$('<p class="ch-prev-arrow'+(a.rolling?"":" ch-hide")+'" role="button" aria-hidden="'+!a.rolling+'"><span>Previous</span></p>').bind("click",b.prev).prependTo(b.$element),d=$('<p class="ch-next-arrow" role="button" aria-hidden="false"><span>Next</span></p>').bind("click",b.next).appendTo(b.$element);c[0].style.top=d[0].style.top=(b.$element.outerHeight()-c.outerHeight())/2+"px",b.manageArrows=function(a){a>1&&a<b.pages?(c.attr("aria-hidden","false").removeClass("ch-hide"),d.attr("aria-hidden","false").removeClass("ch-hide")):a===1?(c.addClass("ch-hide").attr("aria-hidden","true"),d.attr("aria-hidden","false").removeClass("ch-hide")):a===b.pages&&(c.attr("aria-hidden","false").removeClass("ch-hide"),d.addClass("ch-hide").attr("aria-hidden","true"))}},e=function(){var a=$('<ul class="ch-carousel-pages ch-hide" role="tablist">'),c;for(var d=1;d<=b.pages;d+=1){var e=d===b.currentPage?' class="ch-carousel-pages-on" aria-selected="true"':' aria-selected="false"',f=$("<li"+e+' role="tab" aria-controls="page'+d+'">'+d+"</li>").bind("click",function(a){return function(){b.goTo(a)}}(d));a.append(f)}b.$element.append(a),a.css("left",(b.$element.outerWidth()-a.outerWidth())/2).removeClass("ch-hide"),c=a.children(),b.managePagination=function(a){c.eq(b.currentPage-1).removeClass("ch-carousel-pages-on").attr("aria-selected","false"),c.eq(a-1).addClass("ch-carousel-pages-on").attr("aria-selected","true")}},f=function(){var a=b.$mask.outerWidth()-b.itemsWidth;return b.itemsPerPage=a>b.itemsWidth?~~(a/b.itemsWidth):1},g=function(){return b.pages=Math.ceil(b.itemsTotal/b.itemsPerPage)},h=function(){i=b.$mask.outerWidth(),f(),g(),b.itemsMargin=Math.ceil((i-b.itemsWidth*b.itemsPerPage)/b.itemsPerPage/2);if(!(b.itemsMargin<0)){b.$content.detach(),b.goTo(1);var c=b.$items.length;while(c)b.$items[c-=1].style.marginLeft=b.$items[c].style.marginRight=b.itemsMargin+"px";b.$content.css("width",(b.itemsWidth+b.itemsMargin*2)*b.$items.length+j).appendTo(b.$mask),a.arrows&&(b.$element.find(".ch-prev-arrow, .ch-next-arrow").remove(),b.pages>1&&d()),a.pagination&&(b.$element.find(".ch-carousel-pages").remove(),b.pages>1&&e())}},i,j,k=!1;b.$content=$('<div class="ch-carousel-content">'),b.$collection=b.$element.children("ul").addClass("ch-carousel-list").attr("role","list").appendTo(b.$content),b.$items=b.$collection.children().addClass("ch-carousel-item").attr("role","listitem"),b.$mask=$('<div class="ch-carousel-mask" role="tabpanel">').append(b.$content).appendTo(b.$element),b.queue=a.asyncData||[],b.itemsTotal=b.$items.length+b.queue.length,b.itemsWidth=b.$items.outerWidth(),b.itemsMargin=0,b.itemsPerPage=f(),b.pages=g(),b.currentPage=1,b.addItems=function(c){var d=b.queue.splice(0,c),e=ch.utils.hasOwn(a,"asyncRender"),f=b.$items.length;for(var g=0;g<c;g+=1){var h=~~(f/b.itemsPerPage)+1;d[g]='<li class="ch-carousel-item" role="listitem" aria-hidden="'+(h!==b.currentPage)+'" aria-setsize="'+b.itemsTotal+'" aria-posinset="'+(f+=1)+'" aria-label="page'+h+'" style="margin-right: '+b.itemsMargin+"px; margin-left: "+b.itemsMargin+'px;">'+(e?a.asyncRender(d[g]):d[g])+"</li>"}b.$content.css("width",(b.itemsWidth+b.itemsMargin*2)*b.itemsTotal+j),b.$collection.append(d.join("")),b.$items=b.$collection.children(),b.callbacks("onItemsAdded"),b.trigger("itemsAdded")},b.asyncItemsLoad=function(){if(b.queue.length!==0){var a=b.currentPage*b.itemsPerPage,c=b.$items.length;if(a<c)return;var d=a%c;d=d===0?b.itemsPerPage:d,d=b.queue.length<d?b.queue.length:d,b.addItems(d)}},b.goTo=function(c){if(c===b.currentPage||c>b.pages||c<1||isNaN(c))return b;!a.rolling&&a.arrows&&b.manageArrows(c),a.pagination&&b.managePagination(c);var d=-(i*(c-1));a.fx&&ch.features.transition?b.$content.css("left",d):a.fx?b.$content.animate({left:d}):b.$content.css("left",d),b.currentPage=c,$.each(b.$items,function(a,d){$(d).attr("aria-hidden",~~(a/b.itemsPerPage)+1!==c)}),b.callbacks("onMove"),b.trigger("move");return b},b.prev=function(){b.goTo(b.currentPage-1),b.callbacks("onPrev"),b.trigger("prev");return b},b.next=function(){b.goTo(b.currentPage+1),ch.utils.hasOwn(a,"asyncData")&&b.asyncItemsLoad(),b.callbacks("onNext"),b.trigger("next");return b},b["public"].itemsPerPage=function(){return b.itemsPerPage},b["public"].page=function(c){if(!c)return b.currentPage;if(ch.utils.hasOwn(a,"asyncData"))return b["public"];b.goTo(c);return b["public"]},b["public"].prev=function(){b.prev();return b["public"]},b["public"].next=function(){b.next();return b["public"]},b["public"].redraw=function(){h();return b["public"]},c(),h();if(ch.utils.hasOwn(a,"width"))return b;ch.utils.window.bind("resize",function(){k=!0}),setInterval(function(){!k||(k=!1,h())},350);return b},ch.factory("carousel"),ch.extend("watcher").as("custom",function(a){a.lambda||alert('Custom Validation fatal error: Need a function to evaluate, try $().custom(function(){},"Message");'),a.custom=!0,a.conditions=[{name:"custom",func:a.lambda}];return a}),ch.dropdown=function(a){var b=this;a=ch.clon(a),b.conf=a,b=ch.navs.call(b),b.parent=ch.clon(b);var c=function(a){var c=0;$.each(a,function(b,d){$(d).bind("mouseenter",function(){c=b,a.eq(c).focus()})});var d=function(d,e){b.prevent(e);c!=(d=="bottom"?a.length-1:0)&&(a.eq(c).blur(),d=="bottom"?c+=1:c-=1,a.eq(c).focus())};ch.utils.document.bind(ch.events.KEY.UP_ARROW,function(a,b){d("up",b)}),ch.utils.document.bind(ch.events.KEY.DOWN_ARROW,function(a,b){d("bottom",b)})};b.$trigger=b.$element.children().eq(0),b.$content=b.$trigger.next().removeClass("ch-hide").attr("aria-hidden","true").attr("role","menu"),b.show=function(a){b.prevent(a),b.$content.css("z-index",ch.utils.zIndex++).attr("aria-hidden","false"),b.$element.hasClass("secondary")&&b.$trigger.css("z-index",ch.utils.zIndex++),b.$trigger.css("z-index",ch.utils.zIndex++),b.parent.show(a),b.position("refresh"),$.each(ch.instances.dropdown,function(a,c){c.uid!==b.uid&&c.hide()}),ch.utils.document.one("click "+ch.events.KEY.ESC,function(a){b.hide(a)}),b.$content.find("a").one("click",function(){b.hide()});var d=b.$content.find("a");d.eq(0).focus(),d.length>1&&c(d);return b},b.hide=function(a){b.prevent(a),b.parent.hide(a),b.$content.attr("aria-hidden","true"),ch.utils.document.unbind(ch.events.KEY.ESC+" "+ch.events.KEY.UP_ARROW+" "+ch.events.KEY.DOWN_ARROW);return b},b["public"].show=function(){b.show();return b["public"]},b["public"].hide=function(){b.hide();return b["public"]},b.configBehavior(),ch.utils.avoidTextSelection(b.$trigger),b.$content.children().attr("role","menuitem"),b.$content.bind("click",function(a){a.stopPropagation()}),b.conf.position={},b.conf.position.element=b.$content,b.conf.position.context=b.$trigger,b.conf.position.points=a.points||"lt lb",b.conf.position.offset="0 -1";return b},ch.factory("dropdown"),ch.expando=function(a){var b=this;a=ch.clon(a),b.conf=a,b=ch.navs.call(b),b.parent=ch.clon(b),b.$trigger=b.$element.children().eq(0).wrapInner("<span>").children(),b.$content=b.$element.children().eq(1),b["public"].show=function(){b.show();return b["public"]},b["public"].hide=function(){b.hide();return b["public"]},b.configBehavior(),ch.utils.avoidTextSelection(b.$trigger);return b},ch.factory("expando"),ch.form=function(a){if(this.$element.find(":submit").length==0||this.$element.attr("action")=="")alert("Form fatal error: The <input type=submit> is missing, or need to define a action attribute on the form tag.");else{if(ch.utils.hasOwn(ch.instances,"form")&&ch.instances.form.length>0)for(var b=0,c=ch.instances.form.length;b<c;b++)if(ch.instances.form[b].element===this.element)return{exists:!0,object:ch.instances.form[b]};var d=this;a=ch.clon(a),d.$element.attr("novalidate","novalidate"),d.$submit=d.$element.find("input:submit"),d.conf=a,d=ch.controllers.call(d),d.parent=ch.clon(d);var e=!0,f=function(){d.callbacks("beforeValidate"),d.trigger("beforeValidate"),e||(e=!0);var a=0,b=d.children.length,c,f=[];for(a;a<b;a++){var g=d.children[a];g.validate(),g.active()&&f.push(g)}f.length>0?(e=!1,f[0].element.tagName==="DIV"?$(f[0].element).find("input:first").focus():f[0].element.focus()):e=!0,e?(d.callbacks("onValidate"),d.trigger("onValidate")):(d.callbacks("onError"),d.trigger("onError")),d.callbacks("afterValidate"),d.trigger("afterValidate");return d},g=function(b){d.callbacks("beforeSubmit"),d.trigger("beforeSubmit"),d.$element.one("submit",g),f(),e||d.prevent(b),e&&ch.utils.hasOwn(a,"onSubmit")&&(d.prevent(b),d.callbacks("onSubmit"),d.trigger("submit")),d.callbacks("afterSubmit"),d.trigger("afterSubmit");return d},h=function(a){d.prevent(a);var b=0,c=d.children.length;for(b;b<c;b+=1)d.children[b].reset();d.callbacks("onClear"),d.trigger("clear");return d},i=function(a){h(),d.element.reset(),d.callbacks("onReset"),d.trigger("reset");return d};d["public"].children=d.children,d["public"].messages=a.messages||{},d["public"].validate=function(){f();return d["public"]},d["public"].submit=function(){g();return d["public"]},d["public"].getStatus=function(){return e},d["public"].clear=function(){h();return d["public"]},d["public"].reset=function(){i();return d["public"]},ch.utils.hasOwn(a,"onSubmit")&&(d.$element.bind("submit",function(a){d.prevent(a)}),d.$element.find(":submit").unbind("click")),d.$element.one("submit",g),d.$element.find(":reset, .resetForm").bind("click",function(a){i(a)});return d}},ch.factory("form"),ch.helper=function(a){var b=this,c={};c.cone=!0,c.position={},c.position.context=a.reference,c.position.offset="15 0",c.position.points="lt rt",c.cache=!1,b.conf=c,b=ch.floats.call(b),b.parent=ch.clon(b),b.content("Error"),b.$trigger=b.$element,b.innerShow=function(){b.active||b.parent.innerShow();return b},$("body").bind(ch.events.LAYOUT.CHANGE,function(){b.position("refresh")}),b.trigger("ready");return b},ch.factory("helper"),ch.layer=function(a){var b=this;a=ch.clon(a),a.cone=!0,a.classes="box",a.closeButton=a.event==="click"?!0:!1,a.position={},a.position.context=b.$element,a.position.offset=a.offset||"0 10",a.position.points=a.points||"lt lb",b.conf=a,b=ch.floats.call(b),b.parent=ch.clon(b);var c=a.showTime||400,d=a.hideTime||400,e,f,g=function(){e=setTimeout(b.innerShow,c)},h=function(c){if(a.event!="click"){var e=c.srcElement||c.target,g=c.relatedTarget||c.toElement;if(e===g||g===undefined||g.parentNode===null||e.nodeName==="SELECT")return}f=setTimeout(b.innerHide,d)},i=function(){clearTimeout(e),clearTimeout(f)},j=function(a){a.stopPropagation()};b.$trigger=b.$element,b.innerShow=function(c){$.each(ch.instances.layer,function(a,b){b.hide()}),b.parent.innerShow(c),a.event=="click"?(a.close=!0,$(document).one("click",b.innerHide),b.$container.bind("click",j)):(i(),b.$container.one("mouseenter",i).bind("mouseleave",h));return b},b.innerHide=function(a){b.$container.unbind("click",j),b.$container.unbind("mouseleave",h),b.parent.innerHide(a)},a.event==="click"?b.$trigger.css("cursor","pointer").bind("click",b.innerShow):b.$trigger.css("cursor","default").bind("mouseenter",b.innerShow).bind("mouseleave",h),$("body").bind(ch.events.LAYOUT.CHANGE,function(){b.position("refresh")}),b.trigger("ready");return b},ch.factory("layer"),ch.menu=function(a){var b=this;a=ch.clon(a),b.conf=a,b=ch.controllers.call(b),b.parent=ch.clon(b);var c=a.selected-1,d=function(){var a=ch.utils.html.hasClass("ie6")||ch.utils.html.hasClass("ie7")?!1:!0;b.$element.children().each(function(d,e){var f=$(e).children();if(f.eq(0).prop("tagName")=="A")$(e).addClass("ch-bellows").children().addClass("ch-bellows-trigger"),b.children.push(f[0]);else{var g=$(e).expando({fx:a,onShow:function(){c=d,b.callbacks.call(b,"onSelect"),b.trigger("select")}});b.children.push(g)}})},e=function(c){var d,e;if(typeof c=="string"){var f=c.split("#");d=f[0]-1,e=f[1]}else d=c-1;var g=b.children[d];ch.utils.hasOwn(g,"uid")?(g.show(),e&&$(g.element).find("a").eq(e-1).addClass("ch-menu-on"),a.accordion&&$.each(b.children,function(a,c){c.tagName!="A"&&ch.utils.hasOwn(c,"uid")&&b.children[d].uid!=b.children[a].uid&&c.hide()})):b.children[d].addClass("ch-menu-on");return b},f=function(){$.each(b.children,function(a,b){$(b.element).find(".ch-expando-trigger").unbind("click").bind("click",function(){e(a+1)})});return};b["public"].select=function(a){e(a);return b["public"]},b.$element.addClass("ch-menu"),d(),a.accordion&&f(),ch.utils.hasOwn(a,"selected")&&e(a.selected);return b},ch.factory("menu"),ch.extend("menu").as("accordion"),ch.modal=function(a){var b=this;a=ch.clon(a),a.closeButton=b.type=="modal"?!0:!1,a.classes="box",b.conf=a,b=ch.floats.call(b),b.parent=ch.clon(b);var c=$('<div class="ch-dimmer">');ch.utils.html.hasClass("ie6")&&c.height(parseInt(document.documentElement.clientHeight,10)*3);var d={on:function(){b.active||(c.css("z-index",ch.utils.zIndex+=1).appendTo("body").fadeIn(),b.type=="modal"&&c.one("click",function(a){b.innerHide(a)}),ch.features.fixed||ch.positioner({element:c}),$("html").hasClass("ie6")&&$("select, object").css("visibility","hidden"))},off:function(){c.fadeOut("normal",function(){c.detach(),$("html").hasClass("ie6")&&$("select, object").css("visibility","visible")})}};b.$trigger=b.$element,b.innerShow=function(a){d.on(),b.parent.innerShow(a),b.$trigger.blur();return b},b.innerHide=function(a){d.off(),b.parent.innerHide(a);return b},b.$trigger.css("cursor","pointer").bind("click",function(a){b.innerShow(a)}),b.trigger("ready");return b},ch.factory("modal"),ch.extend("modal").as("transition",function(a){a.closeButton=!1,a.msg=a.msg||a.content||"Please wait...",a.content=$("<div>").addClass("loading").after($("<p>").html(a.msg));return a}),ch.extend("watcher").as("number",function(a){!a.number&&!a.min&&!a.max&&!a.price&&(a.number=!0),a.conditions=[{name:"number",patt:/^([0-9\s]+)$/},{name:"min",expr:function(a,b){return a>=b}},{name:"max",expr:function(a,b){return a<=b}}];return a}),ch.extend("number").as("min"),ch.extend("number").as("max"),ch.extend("watcher").as("price",function(a){a.price=!0,a.conditions=[{name:"price",patt:/^(\d+)[.,]?(\d?\d?)$/}];return a}),ch.extend("watcher").as("required",function(a){a.required=!0,a.conditions=[{name:"required"}];return a}),ch.extend("watcher").as("string",function(a){!a.string&&!a.email&&!a.url&&!a.maxLength&&!a.minLength&&(a.string=!0),a.conditions=[{name:"string",patt:/^([a-zA-Z\u00C0-\u00C4\u00C8-\u00CF\u00D2-\u00D6\u00D9-\u00DC\u00E0-\u00E4\u00E8-\u00EF\u00F2-\u00F6\u00E9-\u00FC\u00C7\u00E7\s]*)$/},{name:"email",patt:/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/},{name:"url",patt:/^((https?|ftp|file):\/\/|((www|ftp)\.)|(\/|.*\/)*)[a-z0-9-]+((\.|\/)[a-z0-9-]+)+([/?].*)?$/},{name:"minLength",expr:function(a,b){return a.length>=b}},{name:"maxLength",expr:function(a,b){return a.length<=b}}];return a}),ch.extend("string").as("email"),ch.extend("string").as("url"),ch.extend("string").as("minLength"),ch.extend("string").as("maxLength"),ch.tabNavigator=function(a){var b=this;a=ch.clon(a),b.conf=a,b=ch.controllers.call(b),b.parent=ch.clon(b);var c=window.location.hash.replace("#!",""),d=!1,e=a.selected-1||a.value-1||0,f=function(){b.$triggers.find("a").each(function(a,c){var d={};d.uid=b.uid+"#"+a,d.type="tab",d.element=c,d.$element=$(c),d.controller=b["public"],d.$element.attr("role","tab");var f={};f.open=e==a,f.onShow=function(){e=a},ch.utils.hasOwn(b.conf,"cache")&&(f.cache=b.conf.cache),ch.utils.hasOwn(b.conf,"onContentLoad")&&(f.onContentLoad=b.conf.onContentLoad),ch.utils.hasOwn(b.conf,"onContentError")&&(f.onContentError=b.conf.onContentError),b.children.push(ch.tab.call(d,f)),$(c).unbind("click").bind("click",function(c){b.prevent(c),g(a+1)})});return},g=function(a){a=b.children[a-1];if(a!==b.children[e]){$.each(b.children,function(b,c){a!==c&&c.hide()}),a.show(),window.location.hash="#!"+a.$content.attr("id"),b.callbacks("onSelect"),b.trigger("select");return b}};b.$triggers=b.$element.children(":first").addClass("ch-tabNavigator-triggers").attr("role","tablist"),b.$content=b.$triggers.next().addClass("ch-tabNavigator-content box").attr("role","presentation"),b["public"].children=b.children,b["public"].select=function(a){g(a);return b["public"]},b["public"].getSelected=function(){return e+1},b.$element.addClass("ch-tabNavigator"),f();for(var h=b.children.length;h-=1;)if(b.children[h].$content.attr("id")===c){g(h+1),d=!0;break}return b},ch.factory("tabNavigator"),ch.tab=function(a){var b=this;a=ch.clon(a),a.icon=!1,b.conf=a,b=ch.navs.call(b),b.parent=ch.clon(b);var c=function(){var a=b.element.href.split("#"),c=b.$element.parents(".ch-tabNavigator"),d=c.find("#"+a[1]);if(d.length>0)return d;b.source=b.element.href;var e=a.length==2?a[1]:"ch-tab"+b.uid.replace("#","-");return $('<div id="'+e+'" role="tabpanel" class="ch-hide">').appendTo(c.children().eq(1))};b.$trigger=b.$element,b.$content=c(),b.show=function(a){b.prevent(a),ch.utils.hasOwn(b,"source")&&b.content(),b.parent.show(a),b.$content.attr("aria-hidden","false"),b.$trigger.focus();return b},b.hide=function(a){b.prevent(a),b.parent.hide(a),b.$content.attr("aria-hidden","true");return b},b["public"].on("contentLoad",function(c,d){b.$content.html(b.staticContent),ch.utils.hasOwn(a,"onContentLoad")&&a.onContentLoad.call(d,b.staticContent)}),b["public"].on("contentError",function(c,d){b.$content.html(b.staticContent);var e=b.source;ch.utils.hasOwn(a,"onContentError")&&a.onContentError.call(d.context,d.jqXHR,d.textStatus,d.errorThrown),b.source=e,b.staticContent=undefined}),b.configBehavior();var d=b.$content.hasClass("ch-hide")?!0:!1;b.$content.attr("role","tabpanel").attr("aria-hidden",d),b.$trigger.attr("role","tab"),b.$trigger.attr("arial-controls",b.$content.attr("id"));return b},ch.tooltip=function(a){var b=this;a=ch.clon(a),a.cone=!0,a.content="<span>"+(b.element.title||b.element.alt)+"</span>",a.position={},a.position.context=$(b.element),a.position.offset=a.offset||"0 10",a.position.points=a.points||"lt lb",b.conf=a,b=ch.floats.call(b),b.parent=ch.clon(b);var c=b.element.title?"title":"alt",d=b.element.title||b.element.alt;b.$trigger=b.$element,b.innerShow=function(a){b.element[c]="",b.parent.innerShow(a);return b},b.innerHide=function(a){b.element[c]=d,b.parent.innerHide(a);return b},b.$trigger.bind("mouseenter",b.innerShow).bind("mouseleave",b.innerHide),$("body").bind(ch.events.LAYOUT.CHANGE,function(){b.position("refresh")}),b.trigger("ready");return b},ch.factory("tooltip"),ch.viewer=function(a){var b=this;a=ch.clon(a),b.conf=a,b=ch.controllers.call(b),b.parent=ch.clon(b);var c=b.$element.addClass("ch-viewer"),d=c.outerWidth(),e=c.outerHeight(),f=c.children().addClass("ch-viewer-content"),g=$('<div class="ch-viewer-display ch-carousel">').append(f).appendTo(c).carousel({width:d,arrows:!1,onMove:function(){var a=this.page(),d=$(k[a-1]).height();b.move(a),c.find(".ch-mask").eq(0).height(d)}}),h=f.children(),i=h.length,j=h.children("a"),k=h.find("img, object");instanceZoom=function(){var d={};d.width=a.zoomWidth||c.width(),d.width==="auto"&&(d.width=c.parent().width()-c.outerWidth()-20),d.height=a.zoomHeight||c.height(),j.each(function(a,e){$(e).children("img").onImagesLoads(function(){var f={uid:b.uid+"#"+a,type:"zoom",element:e,$element:$(e)},g={context:c,onShow:function(){this.width(d.width),this.height(d.height)}};b.children.push(ch.zoom.call(f,g)["public"])})})},createThumbs=function(){var a=$('<ul class"carousel">');$.each(h,function(c,d){var e=$("<li>").bind("click",function(a){b.prevent(a),b.move(c+1)});$(d).children("link[rel=thumb]").length>0?$('<img src="'+$(d).children("link[rel=thumb]").attr("href")+'">').appendTo(e):($(d).children("object").length>0||$(d).children("embed").length>0)&&e.addClass("ch-viewer-video").append("<span>Video</span>"),a.append(e)});var e={};e.children=a.children(),e.selected=1,e.carousel=b.children[0]=$('<div class="ch-viewer-triggers">').append(a).appendTo(c).carousel({width:d});return e},move=function(a){if(a>i||a<1||isNaN(a))return b;$(l.children[l.selected-1]).removeClass("ch-thumbnail-on"),$(l.children[a-1]).addClass("ch-thumbnail-on"),g.page(a);var c=Math.ceil(a/l.carousel.itemsPerPage());l.carousel.page()!==c&&l.carousel.page(c),a>1&&a<i?(arrows.prev.on(),arrows.next.on()):(a===1&&(arrows.prev.off(),arrows.next.on()),a===i&&(arrows.next.off(),arrows.prev.on())),l.selected=a,b.callbacks("onMove"),b.trigger("move");return b},arrows={},arrows.prev={$element:$('<p class="ch-viewer-prev">').bind("click",function(){b.prev()}),on:function(){arrows.prev.$element.addClass("ch-viewer-prev-on")},off:function(){arrows.prev.$element.removeClass("ch-viewer-prev-on")}},arrows.next={$element:$('<p class="ch-viewer-next">').bind("click",function(){b.next()}),on:function(){arrows.next.$element.addClass("ch-viewer-next-on")},off:function(){arrows.next.$element.removeClass("ch-viewer-next-on")}},b.prev=function(){b.move(l.selected-1);return b},b.next=function(){b.move(l.selected+1);return b},b["public"].children=b.children;if(i>1){b["public"].moveTo=function(a){b.move(a);return b["public"]},b["public"].next=function(){b.next();return b["public"]},b["public"].prev=function(){b.prev();return b["public"]},b["public"].getSelected=function(){return l.selected};var l=createThumbs();c.append(arrows.prev.$element).append(arrows.next.$element),b.move=move,b.move(1),arrows.next.on()}c.find(".ch-mask").eq(0).height($(k[0]).height()),ch.utils.hasOwn(ch,"zoom")&&j.length>0&&instanceZoom(),ch.utils.avoidTextSelection(b.element);return b},ch.factory("viewer"),ch.zoom=function(a){var b=this;a=ch.clon(a),a.fx=!1,a.position={},a.position.context=a.context||b.$element,a.position.offset=a.offset||"20 0",a.position.points=a.points||"lt rt",a.position.hold=!0,b.conf=a,b=ch.floats.call(b),b.parent=ch.clon(b);var c={};c.img=b.$element.children(),c.width=c.img.prop("width"),c.height=c.img.prop("height");var d={};d.img=b.source=$("<img>").prop("src",b.element.href);var e={};e.shape=$("<div>").addClass("ch-seeker ch-hide");var f=function(b){var f=b.pageX-c.offset.left,g=b.pageY-c.offset.top,h={};h.left=parseInt(f-e.width),h.right=parseInt(f+e.width),h.top=parseInt(g-e.height),h.bottom=parseInt(g+e.height),h.left>=0&&h.right<c.width-1&&(d.img.css("left",-(parseInt(d.width*f)/c.width-a.width/2)),e.shape.css("left",h.left)),h.top>=0&&h.bottom<c.height-1&&(d.img.css("top",-(parseInt(d.height*g)/c.height-a.height/2)),e.shape.css("top",h.top))},g=function(){d.width=d.img.prop("width"),d.height=d.img.prop("height"),b.$element.append(e.shape).bind("mouseenter",b.show).bind("mouseleave",b.hide)};b.$trigger=b.$element,b.innerShow=function(){c.offset=c.img.offset(),b.$element.bind("mousemove",function(a){f(a)}),e.shape.removeClass("ch-hide"),b.parent.innerShow();return b},b.innerHide=function(){b.$element.unbind("mousemove"),e.shape.addClass("ch-hide"),b.parent.innerHide();return b},b.enlarge=function(a){b.prevent(a);return b},b.size=function(a,f){if(f){var g=c[a]*f/d[a];e.shape[a](g),e[a]=g/2}return b.parent.size(a,f)},b["public"].content=function(){return b.content()},b.$element.addClass("ch-zoom-trigger").css({width:c.width,height:c.height}).bind("click",function(a){b.enlarge(a)}),d.img.onImagesLoads(g),b.trigger("ready");return b},ch.factory("zoom");ch.init();})($);